<textarea name="code" class="sql:nogutter"rows="50" cols="100">
DROP TABLE FECHA_PACIENTE;
/

CREATE TABLE FECHA_PACIENTE
( "ID_FECHA" CHAR(5 BYTE) PRIMARY KEY,
  "FECHA" DATE NOT NULL,
  "TIPO" VARCHAR2(25 BYTE) NOT NULL,
  "ID_PAC" CHAR(5 BYTE) NOT NULL,
  FOREIGN KEY (ID_PAC) REFERENCES PACIENTE,
  CONSTRAINT CHECK_FECHA CHECK(TIPO IN('Revision', 'Estudios_Complementarios')));
/
DROP SEQUENCE SEC_ID_FECHA;
/
CREATE SEQUENCE  SEC_ID_FECHA  MINVALUE 0 INCREMENT BY 1 START WITH 0;
/
CREATE OR REPLACE PROCEDURE CREA_FECHA_PACIENTE
(w_FECHA IN FECHA_PACIENTE.FECHA%TYPE,
 w_TIPO IN FECHA_PACIENTE.TIPO%TYPE, 	
 w_ID_PAC IN FECHA_PACIENTE.ID_PAC%TYPE
)IS
 BEGIN
	INSERT INTO FECHA_PACIENTE(ID_FECHA, FECHA, TIPO, ID_PAC) 
	VALUES (SEC_ID_FECHA.NEXTVAL , w_FECHA, w_TIPO, w_ID_PAC);
	COMMIT WORK;
END CREA_FECHA_PACIENTE;
/
CREATE OR REPLACE PROCEDURE MODIFICAR_FECHA_PACIENTE
(ID_FECHA_A_MOD IN FECHA_PACIENTE.ID_FECHA%TYPE,
 FECHA_A_MOD IN FECHA_PACIENTE.FECHA%TYPE,
 TIPO_A_MOD IN FECHA_PACIENTE.TIPO%TYPE,
 ID_PAC_A_MOD IN FECHA_PACIENTE.ID_PAC%TYPE)  IS
BEGIN
  UPDATE FECHA_PACIENTE
  SET FECHA=FECHA_A_MOD, TIPO=TIPO_A_MOD, 
	ID_PAC=ID_PAC_A_MOD
  WHERE ID_FECHA = ID_FECHA_A_MOD;
  COMMIT WORK;
END MODIFICAR_FECHA_PACIENTE;
</textarea>